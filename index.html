<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOP HAIANH</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        :root { --green: #2ecc71; --red: #e74c3c; --dark: #2c3e50; --bg: #f1f2f6; }
        body { font-family: sans-serif; background: var(--bg); margin: 0; }
        .header { background: var(--dark); color: #fff; padding: 15px; display: flex; justify-content: space-between; border-bottom: 4px solid var(--green); }
        .nav { display: flex; background: #fff; border-bottom: 1px solid #ddd; }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; font-weight: bold; font-size: 13px; }
        .tab.active { color: var(--green); border-bottom: 3px solid var(--green); }
        .card { background: white; padding: 15px; border-radius: 10px; margin: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { border: none; border-radius: 8px; padding: 12px; font-weight: bold; cursor: pointer; color: white; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="header">
        <b>SHOP HAIANH</b>
        <div id="user-info">Đang tải...</div>
    </div>
    <div class="nav">
        <div class="tab active" onclick="show('buy')">MUA ACC</div>
        <div class="tab" onclick="show('topup')">NẠP TIỀN</div>
        <div id="adm-btn" class="tab" style="display:none" onclick="show('adm')">ADMIN</div>
    </div>
    <div id="buy" class="sec"><div class="card"><h3>Shop đang cập nhật sản phẩm...</h3></div></div>
    <div id="topup" class="sec" style="display:none"><div class="card"><h3>Nạp Thẻ</h3><input id="pin" placeholder="Mã thẻ"><button style="background:var(--red)" onclick="alert('Đã gửi!')">NẠP</button></div></div>
    <div id="adm" class="sec" style="display:none"><div class="card"><h3>Quản trị</h3><div id="user-list"></div></div></div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDTgTlg0VFzShYf-g83t6ep5y6WuRM6AVo",
        authDomain: "shophaianh-48d0f.firebaseapp.com",
        projectId: "shophaianh-48d0f",
        storageBucket: "shophaianh-48d0f.firebasestorage.app",
        messagingSenderId: "51501868207",
        appId: "1:51501868207:web:cd24d5dc02b0edff39605a",
        databaseURL: "https://shophaianh-48d0f-default-rtdb.firebaseio.com"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let userData = null;

    db.ref('/').on('value', snap => {
        const data = snap.val() || { users: [{u: 'adminHaianh', p: 'Haiadmin', m: 999999}] };
        render(data);
    });

    function render(data) {
        const session = localStorage.getItem('user');
        if(!session) {
            document.getElementById('user-info').innerHTML = '<button onclick="login()">VÀO</button>';
        } else {
            const me = data.users.find(u => u.u === session);
            document.getElementById('user-info').innerHTML = me.m + 'đ | <span onclick="logout()">THOÁT</span>';
            if(me.u === 'adminHaianh') document.getElementById('adm-btn').style.display = 'block';
        }
    }

    function login() {
        const u = prompt("Tên:"), p = prompt("MK:");
        localStorage.setItem('user', u); // Tạm thời lưu để test
        location.reload();
    }
    function logout() { localStorage.clear(); location.reload(); }
    function show(id) {
        document.querySelectorAll('.sec').forEach(s => s.style.display='none');
        document.getElementById(id).style.display='block';
    }
</script>
</body>
</html>
